<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algoritma Searching - Rute Pengiriman Barang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        

        

        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .route-line {
            stroke-dasharray: 5,5;
            animation: dash 2s linear infinite;
        }
        
        @keyframes dash {
            to { stroke-dashoffset: -10; }
        }
        
        .node-highlight {
            animation: highlight 1s ease-in-out;
        }
        
        @keyframes highlight {
            0%, 100% { fill: #3B82F6; }
            50% { fill: #EF4444; }
        }

        .race-track {
            background: linear-gradient(90deg, #f0f9ff 0%, #e0f2fe 50%, #f0f9ff 100%);
            border: 2px solid #0ea5e9;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .algorithm-runner {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            transition: left 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .bfs-runner {
            background: linear-gradient(45deg, #10b981, #059669);
            top: 25%;
        }

        .dfs-runner {
            background: linear-gradient(45deg, #8b5cf6, #7c3aed);
            top: 65%;
        }

        .finish-line {
            position: absolute;
            right: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: repeating-linear-gradient(
                0deg,
                #000 0px,
                #000 10px,
                #fff 10px,
                #fff 20px
            );
        }

        .race-progress {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 5px 0;
        }

        .progress-bar {
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .bfs-progress { background: #10b981; }
        .dfs-progress { background: #8b5cf6; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Video Opening Page -->
    <div id="videoPage" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 to-purple-900">
        <div class="text-center max-w-4xl mx-auto px-6">
            <div class="bg-black rounded-xl shadow-2xl overflow-hidden mb-8">
                <!-- Video Container -->
                <div class="relative bg-gray-900 aspect-video">
                    <!-- Bumper Video -->
                    <video id="openingVideo" class="w-full h-full object-cover rounded-lg" autoplay muted onended="autoNavigateToEmbedPage()">
                        <source src="bumper.mp4" type="video/mp4">
                        <source src="bumper.webm" type="video/webm">
                        
                        <!-- Fallback content if video fails to load -->
                        <div class="absolute inset-0 flex items-center justify-center bg-gray-800">
                            <div class="text-center text-white">
                                <div class="text-6xl mb-4">🎬</div>
                                <h2 class="text-2xl font-bold mb-4">Video Pembuka</h2>
                                <p class="text-gray-300 mb-6">Video sedang dimuat...</p>
                                <div class="animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"></div>
                                <p class="text-sm text-gray-400">Jika video tidak muncul, akan otomatis lanjut ke halaman berikutnya</p>
                            </div>
                        </div>
                    </video>

                    
                    <!-- Loading overlay -->
                    <div id="videoLoading" class="absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-90">
                        <div class="text-center text-white">
                            <div class="text-6xl mb-4">🎬</div>
                            <h2 class="text-2xl font-bold mb-4">Memuat Video Pembuka</h2>
                            <div class="animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"></div>
                            <p class="text-gray-300">Mohon tunggu sebentar...</p>
                        </div>
                    </div>
                    

                </div>
            </div>
            
            <!-- Auto-navigation info -->
            <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4">
                <p class="text-white text-sm">
                    <span class="inline-block w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"></span>
                    
                </p>
            </div>
        </div>
    </div>

    <!-- Embed Page -->
    <div id="embedPage" class="min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100 hidden">
        <div class="container mx-auto px-6 py-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl mx-auto">
                    <div class="text-5xl mb-4">📺</div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">Video Pembelajaran</h1>
                    <p class="text-gray-600 text-lg">Tonton video pembelajaran tentang algoritma searching untuk pengiriman barang</p>
                </div>
            </div>

            <!-- Single Video Embed Section -->
            <div class="max-w-4xl mx-auto mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center mb-6">
                        <div class="bg-red-500 p-3 rounded-lg mr-3">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800">Algoritma Searching untuk Rute Pengiriman</h2>
                    </div>
                    
                    <!-- Video Embed Container -->
                    <div class="bg-gray-100 rounded-lg mb-6 aspect-video flex items-center justify-center">
                        <div class="text-center">
                            <div class="text-6xl mb-4">🎥</div>
                            <h3 class="text-xl font-semibold text-gray-700 mb-3">Embed Video di Sini</h3>
                            <p class="text-gray-500 mb-4">Tempat untuk menyematkan video pembelajaran dari YouTube, Vimeo, atau platform lainnya</p>
                            <div class="bg-blue-50 p-4 rounded-lg text-left max-w-md mx-auto">
                                <h4 class="font-semibold text-blue-800 mb-2">Contoh Embed Code:</h4>
                                <code class="text-xs text-blue-700 bg-blue-100 p-2 rounded block">
                                    &lt;iframe src="https://www.youtube.com/embed/VIDEO_ID" 
                                    width="100%" height="100%" frameborder="0"&gt;&lt;/iframe&gt;
                                </code>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-6 rounded-lg">
                        <h4 class="font-semibold text-blue-800 mb-3">📚 Materi yang Dibahas dalam Video:</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <ul class="text-blue-700 space-y-2">
                                <li class="flex items-center">
                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                    Pengenalan algoritma BFS dan DFS
                                </li>
                                <li class="flex items-center">
                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                    Implementasi untuk rute pengiriman
                                </li>
                                <li class="flex items-center">
                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                    Perbandingan efisiensi algoritma
                                </li>
                            </ul>
                            <ul class="text-blue-700 space-y-2">
                                <li class="flex items-center">
                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                    Studi kasus industri logistik
                                </li>
                                <li class="flex items-center">
                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                    Optimasi rute pengiriman barang
                                </li>
                                <li class="flex items-center">
                                    <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                    Demo aplikasi praktis
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="text-center">
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Selesai Menonton Video?</h3>
                    <p class="text-gray-600 mb-6">Lanjutkan ke aplikasi pembelajaran interaktif untuk mempraktikkan algoritma searching</p>
                    
                    <div class="flex justify-center space-x-4">
                        <button onclick="goBackToVideo()" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                            ← Kembali ke Video Pembuka
                        </button>
                        <button onclick="enterApp()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg transition duration-200 shadow-lg hover:shadow-xl text-lg">
                            🚀 Lanjut ke Aplikasi Pembelajaran
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Landing Page -->
    <div id="landingPage" class="min-h-screen flex items-center justify-center hidden">
        <div class="text-center">
            <div class="bg-white rounded-xl shadow-lg p-12 max-w-2xl mx-auto">
                <div class="text-6xl mb-6">🚀</div>
                <h1 class="text-4xl font-bold text-gray-800 mb-4">Landing Page</h1>
                <p class="text-gray-600 mb-8 text-lg">Halaman ini siap untuk dikustomisasi sesuai kebutuhan Anda</p>
                
                <div class="bg-blue-50 p-6 rounded-lg mb-8">
                    <h3 class="font-semibold text-blue-800 mb-3">💡 Ide Konten Landing Page:</h3>
                    <div class="text-left space-y-2 text-blue-700">
                        <div>• Hero section dengan judul menarik</div>
                        <div>• Penjelasan singkat tentang aplikasi</div>
                        <div>• Fitur-fitur utama yang ditawarkan</div>
                        <div>• Call-to-action button</div>
                        <div>• Testimoni atau statistik</div>
                    </div>
                </div>
                
                <button onclick="enterApp()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg text-lg transition duration-200 shadow-lg hover:shadow-xl">
                    Masuk ke Aplikasi →
                </button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
    
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-blue-500">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="bg-blue-500 p-3 rounded-lg">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Algoritma Searching</h1>
                        <p class="text-gray-600">Pencarian Rute Pengiriman Barang</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button onclick="goHome()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition duration-200 flex items-center space-x-2">
                        <span>🏠</span>
                        <span>Home</span>
                    </button>
                    <div class="bg-green-100 px-4 py-2 rounded-full">
                        <span class="text-green-800 font-semibold">Modul Interaktif</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="container mx-auto px-6">
            <div class="flex space-x-8">
                <button onclick="showSection('teori')" class="nav-btn py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-semibold">
                    📚 Teori
                </button>
                <button onclick="showSection('simulasi')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                    🎮 Simulasi
                </button>
                <button onclick="showSection('latihan')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                    ✏️ Latihan
                </button>
                <button onclick="showSection('evaluasi')" class="nav-btn py-4 px-2 border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                    📊 Evaluasi
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        <!-- Teori Section -->
        <section id="teori" class="section-content">
            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="bg-blue-500 text-white p-2 rounded-lg mr-3">📚</span>
                    Pengantar Algoritma Searching
                </h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-700 mb-4">Apa itu Algoritma Searching?</h3>
                        <p class="text-gray-600 mb-4 leading-relaxed">
                            Algoritma searching adalah metode untuk mencari data atau informasi tertentu dalam kumpulan data. 
                            Dalam konteks pengiriman barang, algoritma ini membantu mencari rute terbaik dari titik asal ke tujuan.
                        </p>
                        
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <h4 class="font-semibold text-blue-800 mb-2">Tujuan Pembelajaran:</h4>
                            <ul class="text-blue-700 space-y-1">
                                <li>• Memahami konsep algoritma searching</li>
                                <li>• Menerapkan BFS dan DFS untuk rute pengiriman</li>
                                <li>• Menganalisis efisiensi algoritma</li>
                                <li>• Memecahkan masalah rute optimal</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-blue-50 p-6 rounded-lg">
                        <h4 class="font-semibold text-gray-700 mb-4">Contoh Kasus Nyata:</h4>
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">🚚</span>
                                <span class="text-gray-600">Pengiriman paket e-commerce</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">🍕</span>
                                <span class="text-gray-600">Delivery makanan</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">🚑</span>
                                <span class="text-gray-600">Ambulans darurat</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-2xl">📦</span>
                                <span class="text-gray-600">Logistik gudang</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Algoritma Cards -->
            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-500 p-3 rounded-lg mr-3">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Breadth-First Search (BFS)</h3>
                    </div>
                    <p class="text-gray-600 mb-4">
                        BFS menjelajahi semua node pada level yang sama sebelum pindah ke level berikutnya. 
                        Cocok untuk mencari rute terpendek dalam graf tidak berbobot.
                    </p>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-800 mb-2">Keunggulan:</h4>
                        <ul class="text-green-700 text-sm space-y-1">
                            <li>• Menjamin solusi optimal untuk graf tidak berbobot</li>
                            <li>• Cocok untuk pencarian rute terpendek</li>
                            <li>• Mudah diimplementasi</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-500 p-3 rounded-lg mr-3">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800">Depth-First Search (DFS)</h3>
                    </div>
                    <p class="text-gray-600 mb-4">
                        DFS menjelajahi sejauh mungkin pada satu cabang sebelum backtrack. 
                        Efisien untuk mencari semua kemungkinan rute atau deteksi siklus.
                    </p>
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-purple-800 mb-2">Keunggulan:</h4>
                        <ul class="text-purple-700 text-sm space-y-1">
                            <li>• Menggunakan memori lebih sedikit</li>
                            <li>• Cocok untuk pencarian jalur alternatif</li>
                            <li>• Dapat mendeteksi siklus dalam graf</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Simulasi Section -->
        <section id="simulasi" class="section-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="bg-green-500 text-white p-2 rounded-lg mr-3">🎮</span>
                    Simulasi Pencarian Rute
                </h2>

                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Control Panel -->
                    <div class="lg:col-span-1">
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-semibold text-gray-700 mb-4">Panel Kontrol</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-600 mb-2">Titik Asal:</label>
                                    <select id="startNode" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="A">Gudang A</option>
                                        <option value="B">Gudang B</option>
                                        <option value="C">Gudang C</option>
                                        <option value="D">Gudang D</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-600 mb-2">Tujuan:</label>
                                    <select id="endNode" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="E">Toko E</option>
                                        <option value="F">Toko F</option>
                                        <option value="G">Toko G</option>
                                        <option value="H">Toko H</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-600 mb-2">Algoritma:</label>
                                    <select id="algorithm" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="bfs">Breadth-First Search</option>
                                        <option value="dfs">Depth-First Search</option>
                                    </select>
                                </div>
                                
                                <button onclick="startSearch()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-200">
                                    🚀 Mulai Pencarian
                                </button>
                                
                                <button onclick="resetSimulation()" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-200">
                                    🔄 Reset
                                </button>
                            </div>
                            
                            <!-- Status Panel -->
                            <div id="statusPanel" class="mt-6 p-4 bg-blue-50 rounded-lg hidden">
                                <h4 class="font-semibold text-blue-800 mb-2">Status Pencarian:</h4>
                                <div id="searchStatus" class="text-blue-700 text-sm"></div>
                                <div id="pathResult" class="mt-2 text-blue-700 text-sm font-medium"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Graph Visualization -->
                    <div class="lg:col-span-2">
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-semibold text-gray-700 mb-4">Peta Rute Pengiriman</h3>
                            <div class="bg-white p-4 rounded-lg border-2 border-gray-200">
                                <svg id="graphSvg" width="100%" height="400" viewBox="0 0 600 400">
                                    <!-- Nodes -->
                                    <circle id="nodeA" cx="100" cy="100" r="25" fill="#3B82F6" stroke="#1E40AF" stroke-width="3"/>
                                    <text x="100" y="105" text-anchor="middle" fill="white" font-weight="bold">A</text>
                                    <text x="100" y="140" text-anchor="middle" fill="#374151" font-size="12">Gudang A</text>
                                    
                                    <circle id="nodeB" cx="300" cy="80" r="25" fill="#3B82F6" stroke="#1E40AF" stroke-width="3"/>
                                    <text x="300" y="85" text-anchor="middle" fill="white" font-weight="bold">B</text>
                                    <text x="300" y="120" text-anchor="middle" fill="#374151" font-size="12">Gudang B</text>
                                    
                                    <circle id="nodeC" cx="150" cy="200" r="25" fill="#3B82F6" stroke="#1E40AF" stroke-width="3"/>
                                    <text x="150" y="205" text-anchor="middle" fill="white" font-weight="bold">C</text>
                                    <text x="150" y="240" text-anchor="middle" fill="#374151" font-size="12">Gudang C</text>
                                    
                                    <circle id="nodeD" cx="350" cy="180" r="25" fill="#3B82F6" stroke="#1E40AF" stroke-width="3"/>
                                    <text x="350" y="185" text-anchor="middle" fill="white" font-weight="bold">D</text>
                                    <text x="350" y="220" text-anchor="middle" fill="#374151" font-size="12">Gudang D</text>
                                    
                                    <circle id="nodeE" cx="500" cy="120" r="25" fill="#10B981" stroke="#059669" stroke-width="3"/>
                                    <text x="500" y="125" text-anchor="middle" fill="white" font-weight="bold">E</text>
                                    <text x="500" y="160" text-anchor="middle" fill="#374151" font-size="12">Toko E</text>
                                    
                                    <circle id="nodeF" cx="450" cy="250" r="25" fill="#10B981" stroke="#059669" stroke-width="3"/>
                                    <text x="450" y="255" text-anchor="middle" fill="white" font-weight="bold">F</text>
                                    <text x="450" y="290" text-anchor="middle" fill="#374151" font-size="12">Toko F</text>
                                    
                                    <circle id="nodeG" cx="250" cy="300" r="25" fill="#10B981" stroke="#059669" stroke-width="3"/>
                                    <text x="250" y="305" text-anchor="middle" fill="white" font-weight="bold">G</text>
                                    <text x="250" y="340" text-anchor="middle" fill="#374151" font-size="12">Toko G</text>
                                    
                                    <circle id="nodeH" cx="100" cy="320" r="25" fill="#10B981" stroke="#059669" stroke-width="3"/>
                                    <text x="100" y="325" text-anchor="middle" fill="white" font-weight="bold">H</text>
                                    <text x="100" y="360" text-anchor="middle" fill="#374151" font-size="12">Toko H</text>

                                    <!-- Edges -->
                                    <line x1="125" y1="100" x2="275" y2="80" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="125" y1="115" x2="125" y2="175" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="300" y1="105" x2="350" y2="155" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="325" y1="80" x2="475" y2="120" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="175" y1="200" x2="325" y2="180" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="375" y1="180" x2="425" y2="250" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="175" y1="215" x2="225" y2="285" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="125" y1="215" x2="125" y2="295" stroke="#6B7280" stroke-width="2"/>
                                    <line x1="275" y1="300" x2="425" y2="250" stroke="#6B7280" stroke-width="2"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Latihan Section -->
        <section id="latihan" class="section-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="bg-orange-500 text-white p-2 rounded-lg mr-3">🎮</span>
                    Game: Route Master Challenge
                </h2>

                <!-- Game Selection -->
                <div id="gameSelection" class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border-2 border-blue-200 hover:border-blue-400 cursor-pointer transition duration-200" onclick="playSound('click'); startGame('algorace')">
                        <div class="text-center">
                            <div class="text-4xl mb-3">🏁</div>
                            <h3 class="text-lg font-bold text-blue-800 mb-2">Algorithm Race</h3>
                            <p class="text-blue-600 text-sm">Balapan algoritma BFS vs DFS secara real-time</p>
                            <div class="mt-3 bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                                Level: Mudah
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border-2 border-green-200 hover:border-green-400 cursor-pointer transition duration-200" onclick="playSound('click'); startGame('speedrace')">
                        <div class="text-center">
                            <div class="text-4xl mb-3">⚡</div>
                            <h3 class="text-lg font-bold text-green-800 mb-2">Speed Race</h3>
                            <p class="text-green-600 text-sm">Lomba kecepatan algoritma searching</p>
                            <div class="mt-3 bg-green-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                                Level: Sedang
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border-2 border-purple-200 hover:border-purple-400 cursor-pointer transition duration-200" onclick="playSound('click'); startGame('puzzle')">
                        <div class="text-center">
                            <div class="text-4xl mb-3">🧩</div>
                            <h3 class="text-lg font-bold text-purple-800 mb-2">Algorithm Puzzle</h3>
                            <p class="text-purple-600 text-sm">Susun langkah algoritma yang benar</p>
                            <div class="mt-3 bg-purple-500 text-white px-4 py-2 rounded-full text-sm font-semibold">
                                Level: Sulit
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Area -->
                <div id="gameArea" class="hidden">
                    <!-- Algorithm Race Game -->
                    <div id="algoraceGame" class="game-content hidden">
                        <div class="bg-blue-50 p-6 rounded-lg mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-blue-800">🏁 Algorithm Race Challenge</h3>
                                <div class="flex items-center space-x-4">
                                    <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                                        Round: <span id="raceRound">1</span>/5
                                    </span>
                                    <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                                        Skor: <span id="raceScore">0</span>
                                    </span>
                                </div>
                            </div>
                            <p class="text-blue-700 mb-2">Tebak algoritma mana yang akan sampai tujuan lebih dulu! Amati pola pencarian mereka.</p>
                            <div class="bg-blue-100 p-3 rounded-lg mb-4">
                                <h5 class="font-semibold text-blue-800 mb-2">💡 Tips Analisis:</h5>
                                <ul class="text-blue-700 text-sm space-y-1">
                                    <li>• <strong>BFS:</strong> Cari level berapa target ditemukan</li>
                                    <li>• <strong>DFS:</strong> Hitung total langkah hingga target</li>
                                    <li>• <strong>Bandingkan:</strong> Algoritma dengan langkah lebih sedikit menang!</li>
                                </ul>
                            </div>
                            
                            <div class="bg-white p-6 rounded-lg border mb-4">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-semibold text-gray-700">Rute: <span id="raceRoute" class="text-blue-600">A → E</span></h4>
                                    <div class="text-sm text-gray-600">
                                        <span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-1"></span> BFS
                                        <span class="inline-block w-3 h-3 bg-purple-500 rounded-full mr-1 ml-3"></span> DFS
                                    </div>
                                </div>
                                
                                <!-- Search Pattern Visualization -->
                                <div class="grid md:grid-cols-2 gap-4 mb-4">
                                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                        <h5 class="font-semibold text-green-800 mb-2">🟢 Pola BFS (Level by Level)</h5>
                                        <div id="bfsPattern" class="text-sm text-green-700">
                                            <!-- BFS pattern will be shown here -->
                                        </div>
                                        <div class="mt-2 text-xs text-green-600">
                                            Jarak: <span id="bfsDistance" class="font-bold">-</span> langkah
                                        </div>
                                    </div>
                                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                                        <h5 class="font-semibold text-purple-800 mb-2">🟣 Pola DFS (Depth First)</h5>
                                        <div id="dfsPattern" class="text-sm text-purple-700">
                                            <!-- DFS pattern will be shown here -->
                                        </div>
                                        <div class="mt-2 text-xs text-purple-600">
                                            Jarak: <span id="dfsDistance" class="font-bold">-</span> langkah
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Race Track -->
                                <div class="race-track h-24 mb-4 relative">
                                    <div class="finish-line"></div>
                                    <div class="algorithm-runner bfs-runner" id="bfsRunner">BFS</div>
                                    <div class="algorithm-runner dfs-runner" id="dfsRunner">DFS</div>
                                </div>
                                
                                <!-- Progress Bars -->
                                <div class="space-y-2 mb-4">
                                    <div class="flex items-center">
                                        <span class="w-12 text-sm font-semibold text-green-600">BFS:</span>
                                        <div class="flex-1 race-progress">
                                            <div class="progress-bar bfs-progress" id="bfsProgress" style="width: 0%"></div>
                                        </div>
                                        <span class="w-12 text-right text-sm" id="bfsSteps">0</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="w-12 text-sm font-semibold text-purple-600">DFS:</span>
                                        <div class="flex-1 race-progress">
                                            <div class="progress-bar dfs-progress" id="dfsProgress" style="width: 0%"></div>
                                        </div>
                                        <span class="w-12 text-right text-sm" id="dfsSteps">0</span>
                                    </div>
                                </div>
                                
                                <!-- Prediction Buttons -->
                                <div id="predictionButtons" class="flex justify-center space-x-4">
                                    <button onclick="makePrediction('bfs')" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition duration-200">
                                        🟢 BFS Menang
                                    </button>
                                    <button onclick="makePrediction('dfs')" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold transition duration-200">
                                        🟣 DFS Menang
                                    </button>
                                    <button onclick="makePrediction('tie')" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold transition duration-200">
                                        ⚪ Seri
                                    </button>
                                </div>
                                
                                <div class="text-center mt-4">
                                    <button onclick="startRace()" id="startRaceBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-lg">
                                        🚀 Mulai Balapan!
                                    </button>
                                </div>
                            </div>
                            
                            <div id="raceResult" class="hidden mt-4 p-4 rounded-lg"></div>
                        </div>
                    </div>

                    <!-- Speed Race Game -->
                    <div id="speedraceGame" class="game-content hidden">
                        <div class="bg-green-50 p-6 rounded-lg mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-green-800">⚡ Speed Race Challenge</h3>
                                <div class="flex items-center space-x-4">
                                    <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                                        Waktu: <span id="speedraceTimer">30</span>s
                                    </span>
                                    <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                                        Skor: <span id="speedraceScore">0</span>
                                    </span>
                                </div>
                            </div>
                            <p class="text-green-700 mb-4">Pilih algoritma yang paling cocok untuk setiap skenario secepat mungkin!</p>
                            
                            <div id="speedraceQuestion" class="bg-white p-6 rounded-lg border-2 border-green-200">
                                <!-- Questions will be loaded here -->
                            </div>
                            
                            <div class="mt-4 text-center">
                                <button onclick="startSpeedRace()" id="speedraceStartBtn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold text-lg">
                                    🚀 Mulai Race!
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Algorithm Puzzle Game -->
                    <div id="puzzleGame" class="game-content hidden">
                        <div class="bg-purple-50 p-6 rounded-lg mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-purple-800">🧩 Algorithm Puzzle</h3>
                                <div class="flex items-center space-x-4">
                                    <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                                        Langkah: <span id="puzzleMoves">0</span>
                                    </span>
                                    <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                                        Target: <span id="puzzleTarget">5</span>
                                    </span>
                                </div>
                            </div>
                            <p class="text-purple-700 mb-4">Susun langkah-langkah algoritma BFS dalam urutan yang benar!</p>
                            
                            <div class="grid lg:grid-cols-2 gap-6">
                                <div class="bg-white p-4 rounded-lg border">
                                    <h4 class="font-semibold text-gray-700 mb-3">Langkah-langkah Tersedia:</h4>
                                    <div id="puzzleSteps" class="space-y-2">
                                        <!-- Puzzle steps will be loaded here -->
                                    </div>
                                </div>
                                
                                <div class="bg-white p-4 rounded-lg border">
                                    <h4 class="font-semibold text-gray-700 mb-3">Urutan Algoritma BFS:</h4>
                                    <div id="puzzleSolution" class="space-y-2 min-h-[200px] border-2 border-dashed border-purple-300 p-3 rounded">
                                        <div class="text-gray-500 text-center">Seret langkah ke sini...</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4 flex justify-between">
                                <button onclick="resetPuzzle()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold">
                                    🔄 Reset
                                </button>
                                <button onclick="checkPuzzleAnswer()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-semibold">
                                    ✓ Cek Urutan
                                </button>
                            </div>
                        </div>
                        
                        <div id="puzzleResult" class="hidden mt-4 p-4 rounded-lg"></div>
                    </div>

                    <div class="text-center mt-6">
                        <button onclick="backToGameSelection()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold">
                            ← Kembali ke Menu Game
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Evaluasi Section -->
        <section id="evaluasi" class="section-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="bg-purple-500 text-white p-2 rounded-lg mr-3">📊</span>
                    Evaluasi Pembelajaran
                </h2>

                <div id="evaluationContent">
                    <div id="quizContainer" class="space-y-6">
                        <!-- Evaluation questions will be loaded here -->
                    </div>

                    <div class="flex justify-between mt-8">
                        <button onclick="previousQuestion()" id="prevBtn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg transition duration-200 disabled:opacity-50" disabled>
                            ← Sebelumnya
                        </button>
                        <span id="questionCounter" class="flex items-center text-gray-600 font-medium">
                            Soal 1 dari 6
                        </span>
                        <button onclick="nextQuestion()" id="nextBtn" class="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2 px-6 rounded-lg transition duration-200">
                            Selanjutnya →
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Global variables
        let currentQuestion = 0;
        let userAnswers = [];
        let searchInProgress = false;
        
        // Game data
        const gameData = {
            algorace: {
                round: 1,
                score: 0,
                maxRounds: 5,
                currentPrediction: null,
                races: [
                    { 
                        start: 'A', end: 'E', bfsSteps: 3, dfsSteps: 3, winner: 'tie',
                        bfsPattern: ['A', 'B,C', 'E'], 
                        dfsPattern: ['A', 'B', 'E'],
                        bfsDistance: 3, dfsDistance: 3
                    },
                    { 
                        start: 'A', end: 'H', bfsSteps: 3, dfsSteps: 4, winner: 'bfs',
                        bfsPattern: ['A', 'B,C', 'H'], 
                        dfsPattern: ['A', 'C', 'G', 'H'],
                        bfsDistance: 3, dfsDistance: 4
                    },
                    { 
                        start: 'B', end: 'G', bfsSteps: 4, dfsSteps: 5, winner: 'bfs',
                        bfsPattern: ['B', 'A,D,E', 'C', 'G'], 
                        dfsPattern: ['B', 'A', 'C', 'D', 'G'],
                        bfsDistance: 4, dfsDistance: 5
                    },
                    { 
                        start: 'C', end: 'F', bfsSteps: 3, dfsSteps: 3, winner: 'tie',
                        bfsPattern: ['C', 'A,D,G,H', 'F'], 
                        dfsPattern: ['C', 'D', 'F'],
                        bfsDistance: 3, dfsDistance: 3
                    },
                    { 
                        start: 'A', end: 'F', bfsSteps: 4, dfsSteps: 6, winner: 'bfs',
                        bfsPattern: ['A', 'B,C', 'D,E,G,H', 'F'], 
                        dfsPattern: ['A', 'B', 'D', 'C', 'G', 'F'],
                        bfsDistance: 4, dfsDistance: 6
                    }
                ]
            },
            speedrace: {
                score: 0,
                timeLeft: 30,
                currentQuestion: 0,
                questions: [
                    {
                        scenario: "Pengiriman paket e-commerce dengan rute terpendek",
                        options: ["BFS", "DFS", "Linear Search"],
                        correct: 0,
                        points: 10
                    },
                    {
                        scenario: "Mencari semua jalur alternatif untuk backup",
                        options: ["BFS", "DFS", "Binary Search"],
                        correct: 1,
                        points: 15
                    },
                    {
                        scenario: "Deteksi jalur melingkar dalam rute pengiriman",
                        options: ["BFS", "DFS", "Dijkstra"],
                        correct: 1,
                        points: 20
                    },
                    {
                        scenario: "Pencarian rute dengan memori terbatas",
                        options: ["BFS", "DFS", "A*"],
                        correct: 1,
                        points: 15
                    },
                    {
                        scenario: "Mencari rute terpendek dalam graf tidak berbobot",
                        options: ["DFS", "BFS", "Greedy"],
                        correct: 1,
                        points: 10
                    }
                ]
            },
            puzzle: {
                moves: 0,
                target: 5,
                steps: [
                    "Inisialisasi queue dengan node awal",
                    "Tandai node awal sebagai dikunjungi",
                    "Ambil node dari depan queue",
                    "Periksa apakah node adalah tujuan",
                    "Tambahkan tetangga yang belum dikunjungi ke queue",
                    "Ulangi sampai queue kosong atau tujuan ditemukan"
                ],
                correctOrder: [0, 1, 2, 3, 4, 5]
            }
        };

        const evaluationQuestions = [
            {
                question: "Mengapa algoritma BFS menjamin solusi optimal dalam graf tidak berbobot?",
                options: [
                    "Karena BFS selalu lebih cepat dari algoritma lain",
                    "Karena BFS menjelajahi node berdasarkan jarak dari node awal",
                    "Karena BFS menggunakan memori yang efisien",
                    "Karena BFS dapat mendeteksi siklus dalam graf"
                ],
                correct: 1,
                explanation: "BFS menjamin solusi optimal karena menjelajahi node berdasarkan level/jarak dari node awal, sehingga node tujuan yang pertama kali ditemukan pasti melalui jalur terpendek."
            },
            {
                question: "Dalam implementasi sistem pengiriman real-time, faktor apa yang paling penting dalam memilih algoritma searching?",
                options: [
                    "Kompleksitas waktu saja",
                    "Kompleksitas ruang saja", 
                    "Keseimbangan antara waktu, ruang, dan kualitas solusi",
                    "Kemudahan implementasi saja"
                ],
                correct: 2,
                explanation: "Sistem real-time memerlukan keseimbangan antara kecepatan eksekusi, penggunaan memori, dan kualitas solusi untuk memberikan performa optimal dalam kondisi operasional yang beragam."
            },
            {
                question: "Bagaimana cara mengoptimalkan algoritma BFS untuk graf dengan banyak node?",
                options: [
                    "Menggunakan array sebagai pengganti queue",
                    "Menggunakan bidirectional search dan pruning",
                    "Mengurangi jumlah node yang dikunjungi secara acak",
                    "Menggunakan rekursi untuk menghemat memori"
                ],
                correct: 1,
                explanation: "Bidirectional search (pencarian dari kedua arah) dan pruning (memangkas cabang yang tidak perlu) dapat mengurangi ruang pencarian secara signifikan pada graf besar."
            },
            {
                question: "Dalam konteks pengiriman multi-tujuan, modifikasi apa yang diperlukan pada algoritma BFS standar?",
                options: [
                    "Menggunakan multiple queues untuk setiap tujuan",
                    "Mengubah kondisi terminasi untuk menangani multiple goals",
                    "Mengganti BFS dengan DFS untuk efisiensi",
                    "Menggunakan priority queue berdasarkan jarak"
                ],
                correct: 1,
                explanation: "Untuk multi-tujuan, kondisi terminasi BFS perlu dimodifikasi untuk melanjutkan pencarian hingga semua tujuan ditemukan atau menggunakan variasi seperti multi-goal BFS."
            },
            {
                question: "Analisis kompleksitas: Jika graf memiliki V=1000 node dan E=5000 edge, berapa operasi maksimum yang diperlukan BFS?",
                options: [
                    "1000 operasi",
                    "5000 operasi", 
                    "6000 operasi",
                    "5,000,000 operasi"
                ],
                correct: 2,
                explanation: "BFS memiliki kompleksitas O(V + E). Dengan V=1000 dan E=5000, operasi maksimum adalah 1000 + 5000 = 6000 operasi untuk mengunjungi semua node dan edge."
            },
            {
                question: "Dalam skenario pengiriman dengan kendala waktu real-time, strategi apa yang paling efektif?",
                options: [
                    "Selalu menggunakan algoritma tercepat tanpa mempertimbangkan kualitas",
                    "Pre-compute rute populer dan gunakan caching",
                    "Menggunakan algoritma yang paling akurat meskipun lambat",
                    "Menggunakan pencarian acak untuk menghemat waktu"
                ],
                correct: 1,
                explanation: "Pre-computing rute populer dan caching hasil pencarian dapat memberikan respons instan untuk query umum sambil tetap mempertahankan kualitas solusi."
            }
        ];

        // Graph representation
        const graph = {
            'A': ['B', 'C'],
            'B': ['A', 'D', 'E'],
            'C': ['A', 'D', 'G', 'H'],
            'D': ['B', 'C', 'F'],
            'E': ['B'],
            'F': ['D', 'G'],
            'G': ['C', 'F'],
            'H': ['C']
        };

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            document.getElementById(sectionName).classList.add('fade-in');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            event.target.classList.remove('border-transparent', 'text-gray-500');
            event.target.classList.add('border-blue-500', 'text-blue-600');
        }

        // Search algorithms
        function bfs(graph, start, end) {
            const queue = [[start]];
            const visited = new Set();
            const steps = [];
            
            while (queue.length > 0) {
                const path = queue.shift();
                const node = path[path.length - 1];
                
                if (!visited.has(node)) {
                    visited.add(node);
                    steps.push({node, path: [...path], action: 'visit'});
                    
                    if (node === end) {
                        return {path, steps};
                    }
                    
                    for (const neighbor of graph[node] || []) {
                        if (!visited.has(neighbor)) {
                            queue.push([...path, neighbor]);
                        }
                    }
                }
            }
            
            return {path: null, steps};
        }

        function dfs(graph, start, end) {
            const stack = [[start]];
            const visited = new Set();
            const steps = [];
            
            while (stack.length > 0) {
                const path = stack.pop();
                const node = path[path.length - 1];
                
                if (!visited.has(node)) {
                    visited.add(node);
                    steps.push({node, path: [...path], action: 'visit'});
                    
                    if (node === end) {
                        return {path, steps};
                    }
                    
                    for (const neighbor of (graph[node] || []).reverse()) {
                        if (!visited.has(neighbor)) {
                            stack.push([...path, neighbor]);
                        }
                    }
                }
            }
            
            return {path: null, steps};
        }

        // Simulation functions
        function startSearch() {
            if (searchInProgress) return;
            
            const start = document.getElementById('startNode').value;
            const end = document.getElementById('endNode').value;
            const algorithm = document.getElementById('algorithm').value;
            
            if (start === end) {
                alert('Titik asal dan tujuan tidak boleh sama!');
                return;
            }
            
            searchInProgress = true;
            resetVisualization();
            
            const statusPanel = document.getElementById('statusPanel');
            const searchStatus = document.getElementById('searchStatus');
            const pathResult = document.getElementById('pathResult');
            
            statusPanel.classList.remove('hidden');
            searchStatus.textContent = `Memulai pencarian dengan ${algorithm.toUpperCase()}...`;
            pathResult.textContent = '';
            
            let result;
            if (algorithm === 'bfs') {
                result = bfs(graph, start, end);
            } else {
                result = dfs(graph, start, end);
            }
            
            animateSearch(result.steps, result.path, searchStatus, pathResult);
        }

        function animateSearch(steps, finalPath, statusElement, resultElement) {
            let stepIndex = 0;
            
            function nextStep() {
                if (stepIndex < steps.length) {
                    const step = steps[stepIndex];
                    highlightNode(step.node);
                    statusElement.textContent = `Mengunjungi node ${step.node}... (Langkah ${stepIndex + 1}/${steps.length})`;
                    stepIndex++;
                    setTimeout(nextStep, 1000);
                } else {
                    // Animation complete
                    if (finalPath) {
                        highlightPath(finalPath);
                        resultElement.textContent = `Rute ditemukan: ${finalPath.join(' → ')} (${finalPath.length - 1} langkah)`;
                        statusElement.textContent = 'Pencarian selesai! Rute optimal telah ditemukan.';
                    } else {
                        resultElement.textContent = 'Tidak ada rute yang ditemukan.';
                        statusElement.textContent = 'Pencarian selesai. Tidak ada jalur yang tersedia.';
                    }
                    searchInProgress = false;
                }
            }
            
            nextStep();
        }

        function highlightNode(nodeId) {
            const node = document.getElementById(`node${nodeId}`);
            if (node) {
                node.classList.add('node-highlight');
                setTimeout(() => {
                    node.classList.remove('node-highlight');
                }, 1000);
            }
        }

        function highlightPath(path) {
            path.forEach((nodeId, index) => {
                setTimeout(() => {
                    const node = document.getElementById(`node${nodeId}`);
                    if (node) {
                        node.setAttribute('fill', '#EF4444');
                        node.classList.add('pulse-animation');
                    }
                }, index * 200);
            });
        }

        function resetSimulation() {
            searchInProgress = false;
            resetVisualization();
            document.getElementById('statusPanel').classList.add('hidden');
        }

        function resetVisualization() {
            // Reset all nodes to original colors
            document.querySelectorAll('[id^="node"]').forEach(node => {
                const nodeId = node.id.replace('node', '');
                if (['A', 'B', 'C', 'D'].includes(nodeId)) {
                    node.setAttribute('fill', '#3B82F6');
                } else {
                    node.setAttribute('fill', '#10B981');
                }
                node.classList.remove('pulse-animation', 'node-highlight');
            });
        }

        // Audio functions
        function playSound(type) {
            // Create audio context for sound effects
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            function createTone(frequency, duration, type = 'sine') {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            }
            
            switch(type) {
                case 'click':
                    createTone(800, 0.1);
                    break;
                case 'drop':
                    createTone(600, 0.2);
                    break;
                case 'clear':
                    createTone(400, 0.3);
                    break;
                case 'success':
                    // Success melody
                    createTone(523, 0.2); // C
                    setTimeout(() => createTone(659, 0.2), 100); // E
                    setTimeout(() => createTone(784, 0.2), 200); // G
                    setTimeout(() => createTone(1047, 0.4), 300); // C
                    break;
                case 'error':
                    createTone(300, 0.5, 'sawtooth');
                    break;
            }
        }

        // Game functions
        function startGame(gameType) {
            playSound('click');
            document.getElementById('gameSelection').classList.add('hidden');
            document.getElementById('gameArea').classList.remove('hidden');
            
            // Hide all games first
            document.querySelectorAll('.game-content').forEach(game => {
                game.classList.add('hidden');
            });
            
            // Show selected game
            document.getElementById(gameType + 'Game').classList.remove('hidden');
            
            // Initialize specific game
            switch(gameType) {
                case 'algorace':
                    initAlgoraceGame();
                    break;
                case 'speedrace':
                    initSpeedRaceGame();
                    break;
                case 'puzzle':
                    initPuzzleGame();
                    break;
            }
        }

        function backToGameSelection() {
            playSound('click');
            document.getElementById('gameArea').classList.add('hidden');
            document.getElementById('gameSelection').classList.remove('hidden');
        }

        // Algorithm Race Game
        function initAlgoraceGame() {
            gameData.algorace.round = 1;
            gameData.algorace.score = 0;
            gameData.algorace.currentPrediction = null;
            
            document.getElementById('raceRound').textContent = gameData.algorace.round;
            document.getElementById('raceScore').textContent = gameData.algorace.score;
            
            loadRaceRound();
        }

        function loadRaceRound() {
            const race = gameData.algorace.races[gameData.algorace.round - 1];
            document.getElementById('raceRoute').textContent = `${race.start} → ${race.end}`;
            
            // Show search patterns
            displaySearchPatterns(race);
            
            // Reset race track
            document.getElementById('bfsRunner').style.left = '10px';
            document.getElementById('dfsRunner').style.left = '10px';
            document.getElementById('bfsProgress').style.width = '0%';
            document.getElementById('dfsProgress').style.width = '0%';
            document.getElementById('bfsSteps').textContent = '0';
            document.getElementById('dfsSteps').textContent = '0';
            
            // Show prediction buttons
            document.getElementById('predictionButtons').classList.remove('hidden');
            document.getElementById('startRaceBtn').classList.remove('hidden');
            document.getElementById('raceResult').classList.add('hidden');
            
            gameData.algorace.currentPrediction = null;
        }

        function displaySearchPatterns(race) {
            // Display BFS pattern
            const bfsPatternDiv = document.getElementById('bfsPattern');
            bfsPatternDiv.innerHTML = race.bfsPattern.map((level, index) => 
                `<div class="mb-1">
                    <span class="font-semibold text-green-800">Level ${index + 1}:</span> 
                    <span class="bg-green-100 px-2 py-1 rounded text-xs">${level}</span>
                </div>`
            ).join('');
            document.getElementById('bfsDistance').textContent = race.bfsDistance;
            
            // Display DFS pattern
            const dfsPatternDiv = document.getElementById('dfsPattern');
            dfsPatternDiv.innerHTML = race.dfsPattern.map((step, index) => 
                `<div class="mb-1">
                    <span class="font-semibold text-purple-800">Step ${index + 1}:</span> 
                    <span class="bg-purple-100 px-2 py-1 rounded text-xs">${step}</span>
                </div>`
            ).join('');
            document.getElementById('dfsDistance').textContent = race.dfsDistance;
        }

        function makePrediction(prediction) {
            playSound('click');
            gameData.algorace.currentPrediction = prediction;
            
            // Highlight selected button
            document.querySelectorAll('#predictionButtons button').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-yellow-300');
            });
            
            event.target.classList.add('ring-4', 'ring-yellow-300');
        }

        function startRace() {
            if (!gameData.algorace.currentPrediction) {
                playSound('error');
                alert('Silakan pilih prediksi terlebih dahulu!');
                return;
            }
            
            playSound('success');
            document.getElementById('predictionButtons').classList.add('hidden');
            document.getElementById('startRaceBtn').classList.add('hidden');
            
            const race = gameData.algorace.races[gameData.algorace.round - 1];
            animateRace(race);
        }

        function animateRace(race) {
            let bfsStep = 0;
            let dfsStep = 0;
            const maxSteps = Math.max(race.bfsSteps, race.dfsSteps);
            
            const interval = setInterval(() => {
                // Update BFS
                if (bfsStep < race.bfsSteps) {
                    bfsStep++;
                    const bfsProgress = (bfsStep / race.bfsSteps) * 100;
                    document.getElementById('bfsProgress').style.width = bfsProgress + '%';
                    document.getElementById('bfsRunner').style.left = (10 + (bfsProgress * 5.5)) + 'px';
                    document.getElementById('bfsSteps').textContent = bfsStep;
                }
                
                // Update DFS
                if (dfsStep < race.dfsSteps) {
                    dfsStep++;
                    const dfsProgress = (dfsStep / race.dfsSteps) * 100;
                    document.getElementById('dfsProgress').style.width = dfsProgress + '%';
                    document.getElementById('dfsRunner').style.left = (10 + (dfsProgress * 5.5)) + 'px';
                    document.getElementById('dfsSteps').textContent = dfsStep;
                }
                
                // Check if race is finished
                if (bfsStep >= race.bfsSteps && dfsStep >= race.dfsSteps) {
                    clearInterval(interval);
                    setTimeout(() => showRaceResult(race), 1000);
                }
            }, 800);
        }

        function showRaceResult(race) {
            const isCorrect = gameData.algorace.currentPrediction === race.winner;
            const resultDiv = document.getElementById('raceResult');
            
            if (isCorrect) {
                playSound('success');
                gameData.algorace.score += 20;
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-green-50 border border-green-200';
                resultDiv.innerHTML = `
                    <div class="flex items-center mb-2">
                        <span class="text-2xl mr-2">🎉</span>
                        <span class="font-bold text-green-800">Prediksi Benar!</span>
                    </div>
                    <p class="text-green-700 mb-2">
                        ${race.winner === 'bfs' ? 'BFS menang' : race.winner === 'dfs' ? 'DFS menang' : 'Hasil seri'} 
                        (BFS: ${race.bfsSteps} langkah, DFS: ${race.dfsSteps} langkah)
                    </p>
                    <p class="text-green-600 text-sm">+20 poin! 🏆</p>
                `;
            } else {
                playSound('error');
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-red-50 border border-red-200';
                resultDiv.innerHTML = `
                    <div class="flex items-center mb-2">
                        <span class="text-2xl mr-2">❌</span>
                        <span class="font-bold text-red-800">Prediksi Salah!</span>
                    </div>
                    <p class="text-red-700 mb-2">
                        ${race.winner === 'bfs' ? 'BFS menang' : race.winner === 'dfs' ? 'DFS menang' : 'Hasil seri'} 
                        (BFS: ${race.bfsSteps} langkah, DFS: ${race.dfsSteps} langkah)
                    </p>
                    <p class="text-red-600 text-sm">Coba analisis pola pencarian lebih teliti! 🤔</p>
                `;
            }
            
            resultDiv.classList.remove('hidden');
            document.getElementById('raceScore').textContent = gameData.algorace.score;
            
            // Show next round button
            setTimeout(() => {
                if (gameData.algorace.round < gameData.algorace.maxRounds) {
                    resultDiv.innerHTML += `
                        <div class="mt-3 text-center">
                            <button onclick="nextRaceRound()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold">
                                Round Selanjutnya →
                            </button>
                        </div>
                    `;
                } else {
                    // Game finished
                    resultDiv.innerHTML += `
                        <div class="mt-3 text-center">
                            <div class="text-lg font-bold text-gray-800 mb-2">🏁 Race Selesai!</div>
                            <p class="text-gray-700 mb-3">Skor Akhir: ${gameData.algorace.score}/100</p>
                            <button onclick="initAlgoraceGame()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold">
                                🔄 Main Lagi
                            </button>
                        </div>
                    `;
                }
            }, 2000);
        }

        function nextRaceRound() {
            playSound('click');
            gameData.algorace.round++;
            document.getElementById('raceRound').textContent = gameData.algorace.round;
            loadRaceRound();
        }

        // Speed Race Game
        function initSpeedRaceGame() {
            gameData.speedrace.score = 0;
            gameData.speedrace.timeLeft = 30;
            gameData.speedrace.currentQuestion = 0;
            document.getElementById('speedraceScore').textContent = gameData.speedrace.score;
            document.getElementById('speedraceTimer').textContent = gameData.speedrace.timeLeft;
        }

        function startSpeedRace() {
            document.getElementById('speedraceStartBtn').classList.add('hidden');
            loadSpeedRaceQuestion();
            startSpeedRaceTimer();
        }

        function loadSpeedRaceQuestion() {
            const question = gameData.speedrace.questions[gameData.speedrace.currentQuestion];
            const container = document.getElementById('speedraceQuestion');
            
            container.innerHTML = `
                <h4 class="font-semibold text-gray-800 mb-4">Skenario ${gameData.speedrace.currentQuestion + 1}:</h4>
                <p class="text-gray-700 mb-6 text-lg">${question.scenario}</p>
                <div class="grid grid-cols-3 gap-4">
                    ${question.options.map((option, index) => `
                        <button onclick="answerSpeedRace(${index})" class="bg-white hover:bg-green-50 border-2 border-gray-200 hover:border-green-400 p-4 rounded-lg font-semibold text-gray-700 hover:text-green-700 transition duration-200">
                            ${option}
                        </button>
                    `).join('')}
                </div>
            `;
        }

        function answerSpeedRace(selectedIndex) {
            const question = gameData.speedrace.questions[gameData.speedrace.currentQuestion];
            const isCorrect = selectedIndex === question.correct;
            
            if (isCorrect) {
                gameData.speedrace.score += question.points;
                document.getElementById('speedraceScore').textContent = gameData.speedrace.score;
            }
            
            gameData.speedrace.currentQuestion++;
            
            if (gameData.speedrace.currentQuestion < gameData.speedrace.questions.length) {
                setTimeout(() => loadSpeedRaceQuestion(), 500);
            } else {
                endSpeedRace();
            }
        }

        function startSpeedRaceTimer() {
            const timer = setInterval(() => {
                gameData.speedrace.timeLeft--;
                document.getElementById('speedraceTimer').textContent = gameData.speedrace.timeLeft;
                
                if (gameData.speedrace.timeLeft <= 0) {
                    clearInterval(timer);
                    endSpeedRace();
                }
            }, 1000);
        }

        function endSpeedRace() {
            const container = document.getElementById('speedraceQuestion');
            let performance = '';
            if (gameData.speedrace.score >= 60) performance = 'Excellent! 🏆';
            else if (gameData.speedrace.score >= 40) performance = 'Good! 👍';
            else performance = 'Keep trying! 💪';
            
            container.innerHTML = `
                <div class="text-center">
                    <div class="text-4xl mb-3">⏰</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Waktu Habis!</h3>
                    <p class="text-gray-700 mb-2">Skor Akhir: <span class="font-bold text-green-600">${gameData.speedrace.score}</span></p>
                    <p class="text-gray-600 mb-4">${performance}</p>
                    <button onclick="initSpeedRaceGame(); document.getElementById('speedraceStartBtn').classList.remove('hidden')" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold">
                        🔄 Main Lagi
                    </button>
                </div>
            `;
        }

        // Algorithm Puzzle Game
        function initPuzzleGame() {
            gameData.puzzle.moves = 0;
            document.getElementById('puzzleMoves').textContent = gameData.puzzle.moves;
            loadPuzzleSteps();
        }

        function loadPuzzleSteps() {
            const stepsContainer = document.getElementById('puzzleSteps');
            const shuffledSteps = [...gameData.puzzle.steps].sort(() => Math.random() - 0.5);
            
            stepsContainer.innerHTML = shuffledSteps.map((step, index) => `
                <div class="puzzle-step bg-purple-100 p-3 rounded-lg border cursor-move" draggable="true" data-step="${gameData.puzzle.steps.indexOf(step)}">
                    ${step}
                </div>
            `).join('');
            
            setupPuzzleDragDrop();
        }

        function setupPuzzleDragDrop() {
            const solutionArea = document.getElementById('puzzleSolution');
            
            document.querySelectorAll('.puzzle-step').forEach(step => {
                step.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.dataset.step);
                    e.dataTransfer.setData('text/html', this.outerHTML);
                });
            });
            
            solutionArea.addEventListener('dragover', function(e) {
                e.preventDefault();
            });
            
            solutionArea.addEventListener('drop', function(e) {
                e.preventDefault();
                const stepIndex = e.dataTransfer.getData('text/plain');
                const stepHtml = e.dataTransfer.getData('text/html');
                
                if (this.children.length === 1 && this.children[0].textContent.includes('Seret langkah')) {
                    this.innerHTML = '';
                }
                
                const stepDiv = document.createElement('div');
                stepDiv.innerHTML = stepHtml;
                this.appendChild(stepDiv.firstChild);
                
                gameData.puzzle.moves++;
                document.getElementById('puzzleMoves').textContent = gameData.puzzle.moves;
            });
        }

        function checkPuzzleAnswer() {
            const solutionSteps = Array.from(document.getElementById('puzzleSolution').children);
            const userOrder = solutionSteps.map(step => parseInt(step.dataset.step));
            const isCorrect = JSON.stringify(userOrder) === JSON.stringify(gameData.puzzle.correctOrder);
            
            const resultDiv = document.getElementById('puzzleResult');
            
            if (isCorrect) {
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-green-50 border border-green-200';
                resultDiv.innerHTML = `
                    <div class="flex items-center mb-2">
                        <span class="text-2xl mr-2">🎉</span>
                        <span class="font-bold text-green-800">Perfect! Urutan Benar!</span>
                    </div>
                    <p class="text-green-700">Anda berhasil menyusun algoritma BFS dengan benar dalam ${gameData.puzzle.moves} langkah!</p>
                `;
            } else {
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-red-50 border border-red-200';
                resultDiv.innerHTML = `
                    <div class="flex items-center mb-2">
                        <span class="text-2xl mr-2">❌</span>
                        <span class="font-bold text-red-800">Urutan Belum Benar!</span>
                    </div>
                    <p class="text-red-700">Coba susun kembali langkah-langkah algoritma BFS sesuai urutan yang benar.</p>
                `;
            }
            
            resultDiv.classList.remove('hidden');
        }

        function resetPuzzle() {
            document.getElementById('puzzleSolution').innerHTML = '<div class="text-gray-500 text-center">Seret langkah ke sini...</div>';
            document.getElementById('puzzleResult').classList.add('hidden');
            gameData.puzzle.moves = 0;
            document.getElementById('puzzleMoves').textContent = gameData.puzzle.moves;
            loadPuzzleSteps();
        }

        // Evaluation Quiz functions
        function loadQuestion() {
            const container = document.getElementById('quizContainer');
            const question = evaluationQuestions[currentQuestion];
            
            container.innerHTML = `
                <div class="bg-blue-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-blue-800 mb-4">Soal ${currentQuestion + 1}</h3>
                    <p class="text-gray-700 mb-6">${question.question}</p>
                    
                    <div class="space-y-3">
                        ${question.options.map((option, index) => `
                            <label class="flex items-center p-3 bg-white rounded-lg border-2 border-gray-200 hover:border-blue-300 cursor-pointer transition duration-200">
                                <input type="radio" name="answer" value="${index}" class="mr-3 text-blue-500" ${userAnswers[currentQuestion] === index ? 'checked' : ''}>
                                <span class="text-gray-700">${option}</span>
                            </label>
                        `).join('')}
                    </div>
                    
                    ${userAnswers[currentQuestion] !== undefined ? `
                        <div class="mt-6 p-4 rounded-lg ${userAnswers[currentQuestion] === question.correct ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}">
                            <div class="flex items-center mb-2">
                                <span class="text-lg mr-2">${userAnswers[currentQuestion] === question.correct ? '✅' : '❌'}</span>
                                <span class="font-semibold ${userAnswers[currentQuestion] === question.correct ? 'text-green-800' : 'text-red-800'}">
                                    ${userAnswers[currentQuestion] === question.correct ? 'Benar!' : 'Salah!'}
                                </span>
                            </div>
                            <p class="text-gray-700 text-sm">${question.explanation}</p>
                        </div>
                    ` : ''}
                </div>
            `;
            
            // Add event listeners for radio buttons
            document.querySelectorAll('input[name="answer"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    userAnswers[currentQuestion] = parseInt(this.value);
                    setTimeout(() => loadQuestion(), 500); // Reload to show explanation
                });
            });
            
            // Update navigation
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === evaluationQuestions.length - 1 ? 'Selesai' : 'Selanjutnya →';
            document.getElementById('questionCounter').textContent = `Soal ${currentQuestion + 1} dari ${evaluationQuestions.length}`;
        }

        function nextQuestion() {
            if (currentQuestion < evaluationQuestions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                // Quiz completed
                showEvaluation();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function showEvaluation() {
            const correctAnswers = userAnswers.filter((answer, index) => answer === evaluationQuestions[index].correct).length;
            const percentage = Math.round((correctAnswers / evaluationQuestions.length) * 100);
            
            let grade, message, color;
            if (percentage >= 80) {
                grade = 'A';
                message = 'Excellent! Anda telah menguasai materi dengan sangat baik.';
                color = 'green';
            } else if (percentage >= 70) {
                grade = 'B';
                message = 'Good! Pemahaman Anda sudah cukup baik, terus tingkatkan.';
                color = 'blue';
            } else if (percentage >= 60) {
                grade = 'C';
                message = 'Fair. Anda perlu mempelajari kembali beberapa konsep.';
                color = 'yellow';
            } else {
                grade = 'D';
                message = 'Needs Improvement. Silakan pelajari kembali materi secara menyeluruh.';
                color = 'red';
            }
            
            document.getElementById('evaluationContent').innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">${percentage >= 70 ? '🎉' : '📚'}</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Hasil Evaluasi Akhir</h3>
                    
                    <div class="bg-${color}-50 border border-${color}-200 rounded-lg p-6 mb-6 max-w-md mx-auto">
                        <div class="text-4xl font-bold text-${color}-600 mb-2">${percentage}%</div>
                        <div class="text-lg font-semibold text-${color}-800 mb-2">Grade: ${grade}</div>
                        <p class="text-${color}-700">${message}</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6 max-w-2xl mx-auto mb-8">
                        <div class="bg-white p-4 rounded-lg border shadow-sm">
                            <div class="text-2xl font-bold text-green-600">${correctAnswers}</div>
                            <div class="text-gray-600">Jawaban Benar</div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border shadow-sm">
                            <div class="text-2xl font-bold text-red-600">${evaluationQuestions.length - correctAnswers}</div>
                            <div class="text-gray-600">Jawaban Salah</div>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-6 rounded-lg mb-6 max-w-2xl mx-auto">
                        <h4 class="font-semibold text-blue-800 mb-3">📈 Rekomendasi Pembelajaran:</h4>
                        <div class="text-left space-y-2 text-blue-700">
                            ${percentage >= 80 ? 
                                '• Anda sudah menguasai konsep dengan baik<br>• Coba eksplorasi algoritma searching lanjutan<br>• Praktikkan implementasi dalam proyek nyata' :
                                percentage >= 60 ?
                                '• Pelajari kembali konsep BFS dan DFS<br>• Latih lebih banyak soal praktis<br>• Fokus pada aplikasi dalam pengiriman barang' :
                                '• Mulai dari teori dasar algoritma searching<br>• Gunakan simulasi untuk memahami konsep<br>• Konsultasi dengan instruktur untuk bimbingan'
                            }
                        </div>
                    </div>
                    
                    <div class="space-x-4">
                        <button onclick="resetQuiz()" class="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                            🔄 Ulangi Evaluasi
                        </button>
                        <button onclick="showSection('latihan')" class="bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                            🎮 Main Game Lagi
                        </button>
                        <button onclick="showSection('teori')" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
                            📚 Pelajari Teori
                        </button>
                    </div>
                </div>
            `;
        }

        function resetQuiz() {
            currentQuestion = 0;
            userAnswers = [];
            loadQuestion();
        }

        // Video functions
        function autoNavigateToEmbedPage() {
            // Automatically go to embed page when video ends
            setTimeout(() => {
                goToEmbedPage();
            }, 1000); // Small delay for smooth transition
        }

        function initVideoPage() {
            const video = document.getElementById('openingVideo');
            const loading = document.getElementById('videoLoading');
            

            
            // Handle video loading
            video.addEventListener('loadstart', function() {
                loading.classList.remove('hidden');
            });
            
            video.addEventListener('canplay', function() {
                loading.classList.add('hidden');
            });
            

            
            // Handle video load error - auto navigate after 5 seconds
            video.addEventListener('error', function() {
                loading.innerHTML = `
                    <div class="text-center text-white">
                        <div class="text-6xl mb-4">⚠️</div>
                        <h2 class="text-2xl font-bold mb-4">Video Tidak Dapat Dimuat</h2>
                        <p class="text-gray-300 mb-4">Akan otomatis lanjut ke halaman berikutnya...</p>
                        <div class="text-sm text-gray-400">
                            <span id="countdown">5</span> detik
                        </div>
                    </div>
                `;
                
                let countdown = 5;
                const countdownInterval = setInterval(() => {
                    countdown--;
                    const countdownElement = document.getElementById('countdown');
                    if (countdownElement) {
                        countdownElement.textContent = countdown;
                    }
                    
                    if (countdown <= 0) {
                        clearInterval(countdownInterval);
                        goToEmbedPage();
                    }
                }, 1000);
            });
            
            // Try to play video (some browsers require user interaction)
            video.play().catch(function(error) {
                console.log('Autoplay prevented:', error);
                // Show play button if autoplay fails
                loading.innerHTML = `
                    <div class="text-center text-white">
                        <div class="text-6xl mb-4">🎬</div>
                        <h2 class="text-2xl font-bold mb-4">Video Pembuka</h2>
                        <p class="text-gray-300 mb-6">Klik tombol play untuk memulai</p>
                        <button onclick="playVideo()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition duration-200">
                            ▶️ Putar Video
                        </button>

                    </div>
                `;
            });
        }

        function playVideo() {
            const video = document.getElementById('openingVideo');
            const loading = document.getElementById('videoLoading');
            
            video.play().then(() => {
                loading.classList.add('hidden');
            }).catch((error) => {
                console.log('Play failed:', error);
                // If still can't play, just skip to embed page
                goToEmbedPage();
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadQuestion();
            initVideoPage();
        });

        // Navigation functions
        function enterApp() {
            playSound('click');
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('embedPage').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
        }

        function goHome() {
            playSound('click');
            
            // Return to embed page (the second page)
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('videoPage').classList.add('hidden');
            document.getElementById('embedPage').classList.remove('hidden');
            
            // Reset all sections to default state
            resetAllSections();
        }

        // Video page navigation functions
        function skipVideo() {
            playSound('click');
            goToEmbedPage();
        }

        function goToEmbedPage() {
            playSound('click');
            document.getElementById('videoPage').classList.add('hidden');
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('embedPage').classList.remove('hidden');
        }



        function goBackToVideo() {
            playSound('click');
            document.getElementById('embedPage').classList.add('hidden');
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('videoPage').classList.remove('hidden');
        }

        // Reset all sections to default state
        function resetAllSections() {
            // Reset navigation to teori section
            showSection('teori');
            
            // Reset simulation
            resetSimulation();
            
            // Reset games
            backToGameSelection();
            
            // Reset quiz
            resetQuiz();
            
            // Reset any ongoing processes
            searchInProgress = false;
        }
    </script>
    
    </div> <!-- End Main App -->
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9842813cc1d6fd90',t:'MTc1ODcxOTI0Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
